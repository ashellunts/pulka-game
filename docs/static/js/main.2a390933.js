!function(){document.body.style.overflow="hidden",document.documentElement.style.overflow="hidden";var e=document.createElement("canvas");e.style.overflow="hidden",e.style.display="block";var t=e.getContext("2d");document.body.appendChild(e);var n={x:50,y:50},r={width:window.innerWidth,height:window.innerHeight},i=!1,o=!1,a=[],l=0,s=100,h=95,d=!0,u=5,w=new Image;w.src="/pulka-game/player.jpg";var c=new Image,g=new Image;c.src="/pulka-game/bullet.png",g.src="/pulka-game/finish.png";var f=20.8,y=36,m={ArrowUp:!1,ArrowDown:!1,ArrowLeft:!1,ArrowRight:!1},x=!1,A=!1;function p(){e.width=window.innerWidth,e.height=window.innerHeight,r={width:e.width,height:e.height}}function v(e,t){t<n.y?(m.ArrowUp=!0,m.ArrowDown=!1):t>n.y+y?(m.ArrowDown=!0,m.ArrowUp=!1):(m.ArrowUp=!1,m.ArrowDown=!1),e<n.x?(m.ArrowLeft=!0,m.ArrowRight=!1):e>n.x+f?(m.ArrowRight=!0,m.ArrowLeft=!1):(m.ArrowLeft=!1,m.ArrowRight=!1)}var L=1,b=1e3;function k(){n={x:50,y:50},a=[],i=!1,o=!1,l=0,t.clearRect(0,0,r.width,r.height),t.fillStyle="black",t.font="40px Arial",t.fillText("Pulka",r.width/2-50,r.height/2-60),t.font="30px Arial",t.fillText("Level ".concat(L),r.width/2-70,r.height/2),t.font="20px Arial",t.fillText("Press (s) to start the level",r.width/2-125,r.height/2+40),function(){var t=document.createElement("button");t.innerText="Start Level",t.style.position="absolute",t.style.left="50%",t.style.top="50%",t.style.transform="translate(-50%, -50%)",t.style.padding="10px 20px",t.style.fontSize="20px",document.body.appendChild(t),t.addEventListener("click",(function(){d=!1,t.remove(),requestAnimationFrame(R),navigator.userAgentData&&navigator.userAgentData.mobile&&(e.requestFullscreen?e.requestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.msRequestFullscreen&&e.msRequestFullscreen())}))}()}function R(e){t.clearRect(0,0,r.width,r.height);m.ArrowUp&&(n.y=Math.max(0,n.y-5)),m.ArrowDown&&(n.y=Math.min(r.height-y,n.y+5)),m.ArrowLeft&&(n.x=Math.max(0,n.x-5)),m.ArrowRight&&(n.x=Math.min(r.width-f,n.x+5)),t.fillStyle="green",t.drawImage(g,r.width-s,(r.height-h)/2,s,h),t.fillStyle="black",t.font="20px Arial",t.fillText("Level ".concat(L),10,30),t.drawImage(w,n.x,n.y,f,y),e-l>b&&(a.push({x:r.width-100,y:Math.random()*r.height}),l=e),a=a.filter((function(e){return t.drawImage(c,e.x,e.y,20,5),e.x<=n.x+f&&e.x+20>=n.x&&e.y<=n.y+y&&e.y+5>=n.y&&(o=!0),e.x-=5,e.x>-10})),n.x+f>r.width-s&&n.y+y>(r.height-h)/2&&n.y<(r.height+h)/2&&(i=!0),i&&(d=!0,L+=1,console.log("currentLevel",L),L>u?(t.fillText("You Win! \ud83c\udf89",r.width/2-70,r.height/2),t.fillText("Press (r) to restart the game",r.width/2-170,r.height/2+40),D()):(2===L?b=500:3===L?b=300:4===L?b=250:5===L&&(b=230),navigator.userAgentData&&navigator.userAgentData.mobile&&(b/=2),k())),o&&(t.fillStyle="black",t.font="30px Arial",t.fillText("You Lose! \ud83d\udca5",r.width/2-70,r.height/2),t.fillText("Press (r) to restart the game",r.width/2-170,r.height/2+40),D()),t.fillStyle="black",t.font="16px Arial",t.fillText("User Agent: ".concat(navigator.userAgent),10,r.height-40),t.fillText("Bullet Interval: ".concat(b," ms"),10,r.height-20),i||o||d||requestAnimationFrame(R)}function D(){var e=document.createElement("button");e.innerText="Restart Game",e.style.position="absolute",e.style.left="50%",e.style.top="60%",e.style.transform="translate(-50%, -50%)",e.style.padding="10px 20px",e.style.fontSize="20px",document.body.appendChild(e),e.addEventListener("click",(function(){n={x:50,y:50},a=[],i=!1,o=!1,l=0,L=1,b=1e3,navigator.userAgentData&&navigator.userAgentData.mobile&&(b/=2),p(),e.remove(),k()}))}navigator.userAgentData&&navigator.userAgentData.mobile&&(b/=2),window.addEventListener("keydown",(function(e){m.hasOwnProperty(e.key)&&(m[e.key]=!0)})),window.addEventListener("keyup",(function(e){m.hasOwnProperty(e.key)&&(m[e.key]=!1)})),window.addEventListener("resize",p),e.addEventListener("touchstart",(function(e){x=!0;var t=e.touches?e.touches[0]:e;v(t.clientX,t.clientY)})),e.addEventListener("touchmove",(function(e){if(x){var t=e.touches?e.touches[0]:e;v(t.clientX,t.clientY)}})),e.addEventListener("touchend",(function(e){x=!1,m.ArrowUp=!1,m.ArrowDown=!1,m.ArrowLeft=!1,m.ArrowRight=!1})),e.addEventListener("mousedown",(function(e){A=!0,v(e.clientX,e.clientY)})),e.addEventListener("mousemove",(function(e){A&&v(e.clientX,e.clientY)})),e.addEventListener("mouseup",(function(e){A=!1,m.ArrowUp=!1,m.ArrowDown=!1,m.ArrowLeft=!1,m.ArrowRight=!1})),p(),k()}();
//# sourceMappingURL=main.2a390933.js.map